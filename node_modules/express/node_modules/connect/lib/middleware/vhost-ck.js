/*!
 * Connect - vhost
 * Copyright(c) 2010 Sencha Inc.
 * Copyright(c) 2011 TJ Holowaychuk
 * MIT Licensed
 *//**
 * Vhost:
 *
 *   Setup vhost for the given `hostname` and `server`.
 *
 *     connect()
 *       .use(connect.vhost('foo.com', fooApp))
 *       .use(connect.vhost('bar.com', barApp))
 *       .use(connect.vhost('*.com', mainApp))
 *
 *  The `server` may be a Connect server or
 *  a regular Node `http.Server`.
 *
 * @param {String} hostname
 * @param {Server} server
 * @return {Function}
 * @api public
 */module.exports=function(t,n){if(!t)throw new Error("vhost hostname required");if(!n)throw new Error("vhost server required");var r=new RegExp("^"+t.replace(/[^*\w]/g,"\\$&").replace(/[*]/g,"(?:.*?)")+"$","i");n.onvhost&&n.onvhost(t);return function(t,i,s){if(!t.headers.host)return s();var o=t.headers.host.split(":")[0];if(!r.test(o))return s();if("function"==typeof n)return n(t,i,s);n.emit("request",t,i)}};