/*!
 * Connect - session - Session
 * Copyright(c) 2010 Sencha Inc.
 * Copyright(c) 2011 TJ Holowaychuk
 * MIT Licensed
 *//**
 * Module dependencies.
 */var utils=require("../../utils"),Session=module.exports=function(t,n){Object.defineProperty(this,"req",{value:t});Object.defineProperty(this,"id",{value:t.sessionID});"object"==typeof n&&utils.merge(this,n)};Session.prototype.touch=function(){return this.resetMaxAge()};Session.prototype.resetMaxAge=function(){this.cookie.maxAge=this.cookie.originalMaxAge;return this};Session.prototype.save=function(e){this.req.sessionStore.set(this.id,this,e||function(){});return this};Session.prototype.reload=function(e){var t=this.req,n=this.req.sessionStore;n.get(this.id,function(r,i){if(r)return e(r);if(!i)return e(new Error("failed to load session"));n.createSession(t,i);e()});return this};Session.prototype.destroy=function(e){delete this.req.session;this.req.sessionStore.destroy(this.id,e);return this};Session.prototype.regenerate=function(e){this.req.sessionStore.regenerate(this.req,e);return this};